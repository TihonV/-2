<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuperBuilder by Tihon Metelkin</title>
    <style>
        :root {
            --primary: #6366f1;
            --accent: #ec4899;
            --dark: #1e293b;
            --light: #f9fafb;
            --border: #e5e7eb;
            --shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
            --glass: rgba(255,255,255,0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            min-height: 100vh;
            overflow: hidden;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ */
        .author {
            position: fixed;
            bottom: 10px;
            right: 10px;
            font-size: 12px;
            color: rgba(255,255,255,0.5);
            z-index: 1000;
            pointer-events: none;
        }

        .app-container {
            display: flex;
            height: 100vh;
        }

        /* –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å */
        .sidebar {
            width: 280px;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255,255,255,0.1);
            padding: 20px;
            overflow-y: auto;
        }

        .sidebar h3 {
            margin-bottom: 15px;
            color: var(--light);
        }

        .component-item {
            padding: 15px;
            background: rgba(30, 41, 59, 0.5);
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: grab;
            transition: all 0.2s;
            border: 2px dashed transparent;
            user-select: none;
        }

        .component-item:hover {
            background: var(--primary);
            transform: translateY(-2px);
            border-color: white;
        }

        /* –•–æ–ª—Å—Ç */
        .canvas-container {
            flex: 1;
            padding: 20px;
            overflow: auto;
            position: relative;
        }

        .canvas {
            min-height: 100%;
            min-width: 100%;
            background: url('https://assets.website-files.com/60f9f1e5d716fc7ed536831f/6100c235a571269a33657643_grid.svg');
            border-radius: 12px;
            position: relative;
        }

        .element {
            position: absolute;
            min-width: 100px;
            min-height: 50px;
            background: white;
            color: black;
            border-radius: 8px;
            padding: 10px;
            cursor: move;
            user-select: none;
            box-shadow: var(--shadow);
            z-index: 10;
        }

        /* –ü–∞–Ω–µ–ª—å —Å–≤–æ–π—Å—Ç–≤ */
        .properties {
            width: 280px;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            border-left: 1px solid rgba(255,255,255,0.1);
            padding: 20px;
            overflow-y: auto;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--light);
        }

        .form-control {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: rgba(30, 41, 59, 0.5);
            color: white;
        }

        button, input[type="file"] {
            cursor: pointer;
        }

        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .toolbar {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            background: var(--primary);
            color: white;
            cursor: pointer;
            font-weight: 500;
        }

        .btn:hover {
            opacity: 0.9;
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal-content {
            background: var(--dark);
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
        }

        /* –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é */
        .context-menu {
            position: fixed;
            background: var(--dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 8px 0;
            z-index: 3000;
            display: none;
            box-shadow: var(--shadow);
        }

        .context-menu-item {
            padding: 8px 16px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .context-menu-item:hover {
            background: var(--primary);
        }

        /* –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è */
        .protection {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            pointer-events: none;
            font-size: 14px;
            color: rgba(255,255,255,0.5);
        }

        /* –°–∫—Ä—ã—Ç–∞—è –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞ */
        .hidden-copypaste-killer {
            position: absolute;
            top: -9999px;
            left: -9999px;
            opacity: 0;
            pointer-events: none;
            font-size: 1px;
        }
    </style>
</head>
<body>

<div class="toolbar">
    <button class="btn" onclick="saveProject()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <button class="btn" onclick="loadProject()">üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
    <button class="btn" onclick="clearCanvas()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
    <button class="btn" onclick="exportToGitHub()">üì§ GitHub</button>
    <button class="btn" onclick="generateRandomCode()">üìÑ –°–ª—É—á–∞–π–Ω—ã–π –∫–æ–¥</button>
</div>

<div class="app-container">
    <!-- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã -->
    <div class="sidebar">
        <h3>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</h3>
        <div class="component-item" draggable="true" ondragstart="dragStart(event, 'text')">üìù –¢–µ–∫—Å—Ç</div>
        <div class="component-item" draggable="true" ondragstart="dragStart(event, 'image')">üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
        <div class="component-item" draggable="true" ondragstart="dragStart(event, 'button')">üîò –ö–Ω–æ–ø–∫–∞</div>
        <div class="component-item" draggable="true" ondragstart="dragStart(event, 'video')">üé• –í–∏–¥–µ–æ</div>
        <div class="component-item" draggable="true" ondragstart="dragStart(event, 'card')">üÉè –ö–∞—Ä—Ç–æ—á–∫–∞</div>
    </div>

    <!-- –•–æ–ª—Å—Ç -->
    <div class="canvas-container">
        <div class="canvas" id="canvas" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    </div>

    <!-- –°–≤–æ–π—Å—Ç–≤–∞ -->
    <div class="properties">
        <h3>–°–≤–æ–π—Å—Ç–≤–∞</h3>
        <div id="property-panel">
            –í—ã–±–µ—Ä–∏—Ç–µ —ç–ª–µ–º–µ–Ω—Ç
        </div>
    </div>
</div>

<!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é -->
<div class="context-menu" id="contextMenu">
    <div class="context-menu-item" onclick="duplicateElement()">üìã –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å</div>
    <div class="context-menu-item" onclick="deleteElement()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</div>
    <div class="context-menu-item" onclick="bringToFront()">üîù –ù–∞ –ø–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω</div>
    <div class="context-menu-item" onclick="sendToBack()">üîΩ –ù–∞ –∑–∞–¥–Ω–∏–π –ø–ª–∞–Ω</div>
</div>

<!-- –ê–≤—Ç–æ—Ä—Å—Ç–≤–æ -->
<div class="author">¬© 2025 Tihon Metelkin ‚Äî SuperBuilder AI</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
<div class="modal" id="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal()">&times;</span>
        <h3>–≠–∫—Å–ø–æ—Ä—Ç –≤ GitHub</h3>
        <div class="form-group">
            <label>GitHub Token</label>
            <input type="password" id="token" class="form-control" placeholder="ghp_...">
        </div>
        <div class="form-group">
            <label>–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</label>
            <input type="text" id="repo" class="form-control" placeholder="username/repo">
        </div>
        <div class="form-group">
            <label>–§–∞–π–ª</label>
            <input type="text" id="file" class="form-control" value="index.html">
        </div>
        <button class="btn" onclick="performGitHubExport()">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>
</div>

<!-- –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è -->
<div class="protection" id="protection">–ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è ¬© Tihon Metelkin</div>

<!-- –°–∫—Ä—ã—Ç–∞—è –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞ -->
<div class="hidden-copypaste-killer" id="killer">function copy(){alert("–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ ¬© Tihon Metelkin");return false;}document.addEventListener("copy",copy);</div>

<script>
    let draggedType = null;
    let selectedElement = null;
    let canvas = document.getElementById('canvas');

    // --- DRAG & DROP ---
    function allowDrop(e) {
        e.preventDefault();
    }

    function dragStart(e, type) {
        draggedType = type;
        e.dataTransfer.setData("text/plain", type);
        e.dataTransfer.effectAllowed = "copy";
    }

    function drop(e) {
        e.preventDefault();
        const type = draggedType;
        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        createElement(type, x, y);
    }

    // --- –°–û–ó–î–ê–ù–ò–ï –≠–õ–ï–ú–ï–ù–¢–û–í ---
    function createElement(type, x, y) {
        const el = document.createElement('div');
        el.className = 'element';
        el.style.left = x + 'px';
        el.style.top = y + 'px';
        el.draggable = true;
        el.onclick = () => selectElement(el);
        el.oncontextmenu = (e) => showContextMenu(e, el); // –î–æ–±–∞–≤–ª–µ–Ω–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é

        switch (type) {
            case 'text':
                el.innerHTML = '<input type="text" value="–¢–µ–∫—Å—Ç" style="width:100%; border:none; background:transparent;" />';
                break;
            case 'image':
                el.innerHTML = `
                    <input type="text" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" oninput="updateImage(this)" style="width:100%; margin-bottom:5px;" />
                    <input type="file" accept="image/*" onchange="uploadImage(this)" style="width:100%;" />
                    <img src="" id="img-preview" style="max-width:100%; max-height:150px; margin-top:5px;" />
                `;
                break;
            case 'button':
                el.innerHTML = `
                    <input type="text" value="–ö–Ω–æ–ø–∫–∞" style="width:100%; border:none; text-align:center; background:transparent;" /><br>
                    <input type="text" placeholder="–°—Å—ã–ª–∫–∞" id="btn-link" style="width:100%; margin:5px 0;" />
                    <select id="btn-target" style="width:100%;">
                        <option value="_self">–í —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–µ</option>
                        <option value="_blank">–í –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ</option>
                        <option value="newPage">–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</option>
                    </select>
                `;
                el.oninput = updateButtonLogic;
                break;
            case 'video':
                el.innerHTML = `
                    <input type="text" placeholder="URL –≤–∏–¥–µ–æ" oninput="updateVideo(this)" style="width:100%; margin-bottom:5px;" />
                    <input type="file" accept="video/*" onchange="uploadVideo(this)" style="width:100%;" />
                    <video controls style="width:100%; max-height:200px; margin-top:5px;"></video>
                `;
                break;
            case 'card':
                el.innerHTML = `
                    <h4>–ö–∞—Ä—Ç–æ—á–∫–∞</h4>
                    <p>–û–ø–∏—Å–∞–Ω–∏–µ</p>
                    <button onclick="alert('–ö–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!')">–î–µ–π—Å—Ç–≤–∏–µ</button>
                `;
                break;
        }

        canvas.appendChild(el);
        selectElement(el);
    }

    // --- –†–ê–ë–û–¢–ê –° –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø–ú–ò ---
    function uploadImage(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = input.parentNode.querySelector('#img-preview');
                const urlInput = input.parentNode.querySelector('input[type="text"]');
                img.src = e.target.result;
                urlInput.value = e.target.result;
                updateImage(urlInput);
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function updateImage(input) {
        const img = input.parentNode.querySelector('#img-preview');
        img.src = input.value;
    }

    // --- –†–ê–ë–û–¢–ê –° –í–ò–î–ï–û ---
    function uploadVideo(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const video = input.parentNode.querySelector('video');
                const urlInput = input.parentNode.querySelector('input[type="text"]');
                video.src = e.target.result;
                urlInput.value = e.target.result;
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function updateVideo(input) {
        const video = input.parentNode.querySelector('video');
        video.src = input.value;
    }

    // --- –õ–û–ì–ò–ö–ê –ö–ù–û–ü–ö–ò ---
    function updateButtonLogic() {
        const container = this.parentNode;
        const link = container.querySelector('#btn-link').value;
        const target = container.querySelector('#btn-target').value;

        container.onclick = function(e) {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT') return;
            
            if (target === 'newPage') {
                alert(`–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É: ${link || 'home'}`);
            } else if (link) {
                window.open(link, target);
            }
        };
    }

    // --- –í–´–î–ï–õ–ï–ù–ò–ï –≠–õ–ï–ú–ï–ù–¢–ê ---
    function selectElement(el) {
        if (selectedElement) {
            selectedElement.style.outline = 'none';
        }
        selectedElement = el;
        el.style.outline = '3px solid #6366f1';

        showProperties(el);
    }

    // --- –ü–ê–ù–ï–õ–¨ –°–í–û–ô–°–¢–í ---
    function showProperties(el) {
        const panel = document.getElementById('property-panel');
        const rect = el.getBoundingClientRect();

        panel.innerHTML = `
            <div class="form-group">
                <label>X: ${Math.round(rect.left)}</label>
                <input type="range" min="0" max="1200" value="${Math.round(rect.left)}" oninput="moveElement(this, 'x')">
            </div>
            <div class="form-group">
                <label>Y: ${Math.round(rect.top)}</label>
                <input type="range" min="0" max="800" value="${Math.round(rect.top)}" oninput="moveElement(this, 'y')">
            </div>
            <div class="form-group">
                <label>–®–∏—Ä–∏–Ω–∞: ${el.offsetWidth}</label>
                <input type="range" min="50" max="500" value="${el.offsetWidth}" oninput="resizeElement(this, 'width')">
            </div>
            <div class="form-group">
                <label>–í—ã—Å–æ—Ç–∞: ${el.offsetHeight}</label>
                <input type="range" min="30" max="300" value="${el.offsetHeight}" oninput="resizeElement(this, 'height')">
            </div>
            <div class="form-group">
                <label>–§–æ–Ω (URL)</label>
                <input type="text" placeholder="URL —Ñ–æ–Ω–∞" oninput="setBackground(this)" value="${el.style.backgroundImage.replace('url(', '').replace(')', '').replace(/"/g, '') || ''}">
            </div>
            <div class="form-group">
                <label>–¶–≤–µ—Ç —Ñ–æ–Ω–∞</label>
                <input type="color" oninput="setBackgroundColor(this)" value="${el.style.backgroundColor || '#ffffff'}">
            </div>
            <div class="form-group">
                <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</label>
                <input type="color" oninput="setTextColor(this)" value="${el.style.color || '#000000'}">
            </div>
            <div class="form-group">
                <label>–†–∞–¥–∏—É—Å —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è</label>
                <input type="range" min="0" max="50" value="${parseInt(el.style.borderRadius) || 0}" oninput="setBorderRadius(this)">
            </div>
            <div class="form-group">
                <label>–¢–µ–Ω—å</label>
                <input type="checkbox" onchange="toggleShadow(this)">
            </div>
            <div class="form-group">
                <label>–í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä CSS</label>
                <textarea class="form-control" placeholder="background: red; color: blue;" style="height: 80px;" oninput="applyCSS(this)"></textarea>
            </div>
            <div class="form-group">
                <label>JavaScript –∫–æ–¥</label>
                <textarea class="form-control" placeholder="console.log('–ü—Ä–∏–≤–µ—Ç');" style="height: 60px;" oninput="applyJS(this)"></textarea>
            </div>
        `;

        if (el.innerHTML.includes('–°—Å—ã–ª–∫–∞')) {
            panel.innerHTML += `
                <div class="form-group">
                    <label>–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏</label>
                    <input type="text" value="${el.querySelector('input[type="text"]').value}" oninput="updateButtonText(this)">
                </div>
            `;
        }
    }

    function moveElement(input, axis) {
        if (!selectedElement) return;
        const value = input.value;
        if (axis === 'x') selectedElement.style.left = value + 'px';
        if (axis === 'y') selectedElement.style.top = value + 'px';
        showProperties(selectedElement);
    }

    function resizeElement(input, dimension) {
        if (!selectedElement) return;
        const value = input.value;
        selectedElement.style[dimension] = value + 'px';
        showProperties(selectedElement);
    }

    function setBackground(input) {
        if (!selectedElement) return;
        const url = input.value;
        selectedElement.style.backgroundImage = url ? `url(${url})` : 'none';
        selectedElement.style.backgroundSize = 'cover';
        selectedElement.style.backgroundPosition = 'center';
    }

    function setBackgroundColor(input) {
        if (!selectedElement) return;
        selectedElement.style.backgroundColor = input.value;
    }

    function setTextColor(input) {
        if (!selectedElement) return;
        selectedElement.style.color = input.value;
    }

    function setBorderRadius(input) {
        if (!selectedElement) return;
        selectedElement.style.borderRadius = input.value + 'px';
    }

    function toggleShadow(checkbox) {
        if (!selectedElement) return;
        selectedElement.style.boxShadow = checkbox.checked ? '0 4px 6px rgba(0,0,0,0.1)' : 'none';
    }

    function applyCSS(textarea) {
        if (!selectedElement) return;
        const css = textarea.value;
        if (css) {
            const style = css.split(';').filter(s => s.trim()).map(s => s.trim());
            style.forEach(rule => {
                const [prop, val] = rule.split(':');
                if (prop && val) {
                    selectedElement.style.setProperty(prop.trim(), val.trim());
                }
            });
        }
    }

    function applyJS(textarea) {
        if (!selectedElement) return;
        const js = textarea.value;
        if (js) {
            selectedElement.setAttribute('onclick', js);
        }
    }

    function updateButtonText(input) {
        if (!selectedElement) return;
        selectedElement.querySelector('input[type="text"]').value = input.value;
    }

    // --- –ö–û–ù–¢–ï–ö–°–¢–ù–û–ï –ú–ï–ù–Æ ---
    function showContextMenu(e, el) {
        e.preventDefault();
        selectElement(el);
        
        const menu = document.getElementById('contextMenu');
        menu.style.display = 'block';
        menu.style.left = e.pageX + 'px';
        menu.style.top = e.pageY + 'px';
    }

    function duplicateElement() {
        if (!selectedElement) return;
        
        const newEl = selectedElement.cloneNode(true);
        newEl.style.left = (parseInt(selectedElement.style.left) + 20) + 'px';
        newEl.style.top = (parseInt(selectedElement.style.top) + 20) + 'px';
        newEl.onclick = () => selectElement(newEl);
        newEl.oncontextmenu = (e) => showContextMenu(e, newEl);
        
        canvas.appendChild(newEl);
        document.getElementById('contextMenu').style.display = 'none';
    }

    function deleteElement() {
        if (!selectedElement) return;
        selectedElement.remove();
        selectedElement = null;
        document.getElementById('property-panel').innerHTML = '–í—ã–±–µ—Ä–∏—Ç–µ —ç–ª–µ–º–µ–Ω—Ç';
        document.getElementById('contextMenu').style.display = 'none';
    }

    function bringToFront() {
        if (!selectedElement) return;
        selectedElement.style.zIndex = 1000;
        document.getElementById('contextMenu').style.display = 'none';
    }

    function sendToBack() {
        if (!selectedElement) return;
        selectedElement.style.zIndex = 1;
        document.getElementById('contextMenu').style.display = 'none';
    }

    // --- –°–û–•–†–ê–ù–ï–ù–ò–ï –ò –ó–ê–ì–†–£–ó–ö–ê ---
    function saveProject() {
        const data = {
            elements: [],
            timestamp: new Date().toISOString()
        };
        
        canvas.querySelectorAll('.element').forEach(el => {
            data.elements.push({
                html: el.innerHTML,
                style: el.style.cssText,
                left: el.style.left,
                top: el.style.top,
                width: el.style.width,
                height: el.style.height
            });
        });
        
        localStorage.setItem('superbuilder_project', JSON.stringify(data));
        showMessage('‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω');
    }

    function loadProject() {
        const saved = localStorage.getItem('superbuilder_project');
        if (saved) {
            const data = JSON.parse(saved);
            canvas.innerHTML = '';
            
            data.elements.forEach(elData => {
                const el = document.createElement('div');
                el.className = 'element';
                el.innerHTML = elData.html;
                el.style.cssText = elData.style;
                el.style.left = elData.left;
                el.style.top = elData.top;
                el.style.width = elData.width;
                el.style.height = elData.height;
                el.onclick = () => selectElement(el);
                el.oncontextmenu = (e) => showContextMenu(e, el);
                
                canvas.appendChild(el);
            });
            
            showMessage('üì• –ü—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∂–µ–Ω');
        } else {
            showMessage('‚ùå –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤');
        }
    }

    function clearCanvas() {
        if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë?')) {
            canvas.innerHTML = '';
            selectedElement = null;
            document.getElementById('property-panel').innerHTML = '–•–æ–ª—Å—Ç –ø—É—Å—Ç';
        }
    }

    // --- –≠–ö–°–ü–û–†–¢ –í GITHUB ---
    function exportToGitHub() {
        document.getElementById('modal').style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('modal').style.display = 'none';
    }

    async function performGitHubExport() {
        const token = document.getElementById('token').value;
        const repo = document.getElementById('repo').value;
        const file = document.getElementById('file').value;

        if (!token || !repo) {
            showMessage('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
            return;
        }

        const htmlContent = generateHTMLContent();
        const content = btoa(unescape(encodeURIComponent(htmlContent)));

        try {
            const response = await fetch(`https://api.github.com/repos/${repo}/contents/${file}`, {
                method: 'PUT',
                headers: {
                    'Authorization': `token ${token}`,
                    'Accept': 'application/vnd.github.v3+json'
                },
                body: JSON.stringify({
                    message: 'Add website from SuperBuilder',
                    content: content,
                    branch: 'main'
                })
            });

            if (response.ok) {
                showMessage('‚úÖ –£—Å–ø–µ—à–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ GitHub!');
            } else {
                const error = await response.json();
                showMessage(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`);
            }
        } catch (err) {
            showMessage(`‚ùå –û—à–∏–±–∫–∞: ${err.message}`);
        }

        closeModal();
    }

    function generateHTMLContent() {
        return `<!DOCTYPE html>
<html><head><title>SuperBuilder Export</title></head>
<body>${canvas.innerHTML}</body>
</html>`;
    }

    // --- –ì–ï–ù–ï–†–ê–¶–ò–Ø –°–õ–£–ß–ê–ô–ù–û–ì–û –ö–û–î–ê ---
    function generateRandomCode() {
        console.clear();
        
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
        const randomSymbols = Array.from({length: 20}, () => 
            String.fromCharCode(Math.floor(Math.random() * 94) + 33)
        ).join('');

        // –í—ã–≤–æ–¥–∏–º –≤ –∫–æ–Ω—Å–æ–ª—å
        console.log('%c=== SuperBuilder Random Code ===', 'color: #6366f1; font-size: 18px; font-weight: bold;');
        console.log('%c' + randomSymbols.repeat(10), 'color: #ec4899; font-size: 14px;');
        console.log('%c=== –ö–æ–Ω–µ—Ü —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–æ–¥–∞ ===', 'color: #6366f1; font-size: 18px; font-weight: bold;');
        
        showMessage('üìÑ –°–ª—É—á–∞–π–Ω—ã–π –∫–æ–¥ –≤—ã–≤–µ–¥–µ–Ω –≤ –∫–æ–Ω—Å–æ–ª—å');
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞—â–∏—Ç—É –≤–Ω–∏–∑—É
        updateProtection();
    }

    function updateProtection() {
        const protection = document.getElementById('protection');
        const symbols = Array.from({length: 50}, () => 
            String.fromCharCode(Math.floor(Math.random() * 94) + 33)
        ).join('');
        protection.textContent = symbols;
    }

    // --- –ó–ê–©–ò–¢–ê –û–¢ –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø ---
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 's' || e.key === 'S' || e.key === 'i' || e.key === 'I')) {
            e.preventDefault();
            alert('–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–æ ¬© Tihon Metelkin');
        }
    });

    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
        alert('–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –æ—Ç–∫–ª—é—á–µ–Ω–æ ¬© Tihon Metelkin');
    });

    // --- –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ---
    function showMessage(text) {
        const msg = document.createElement('div');
        msg.textContent = text;
        msg.style.cssText = `
            position: fixed; top: 70px; right: 20px; padding: 12px 20px;
            background: #10b981; color: white; border-radius: 6px; z-index: 1000;
            animation: fadeIn 0.3s, fadeOut 0.3s 2.7s forwards;
        `;
        document.body.appendChild(msg);
        setTimeout(() => document.body.removeChild(msg), 3000);
    }

    // --- –ê–ù–ò–ú–ê–¶–ò–ò ---
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; transform: translateY(-10px); } }
    `;
    document.head.appendChild(style);

    // --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ---
    document.addEventListener('DOMContentLoaded', function() {
        updateProtection();
        setInterval(updateProtection, 5000); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
        
        // –í—Ä–µ–¥–æ–Ω–æ—Å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏
        document.addEventListener('copy', function(e) {
            e.preventDefault();
            const originalText = window.getSelection().toString();
            const modifiedText = originalText + '\n\n=== –ö–û–ü–ò–†–û–í–ê–ù–ò–ï –ó–ê–ü–†–ï–©–ï–ù–û ¬© TIHON METELKIN ===\n\n';
            e.clipboardData.setData('text/plain', modifiedText);
            alert('–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ –¥–ª—è –∑–∞—â–∏—Ç—ã ¬© Tihon Metelkin');
        });
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.context-menu')) {
                document.getElementById('contextMenu').style.display = 'none';
            }
        });
    });
</script>

</body>
</html>
